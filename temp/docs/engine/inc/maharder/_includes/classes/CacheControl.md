# CacheControl

## Свойства класса

### `path`
**Тип:** `string|null`  
**Описание:** Абстрактный класс для реализации управления кэшированием. Определяет контракт для классов, управляющих различными аспектами кэш-контроля, такими как загрузка конфигурации, миграция или работа с файлами конфигурации. Может быть дополнен реализацией в наследниках для поддержки специфичных стратегий кэширования. / abstract class CacheControl { / Определяет путь до кеша. Используется для хранения или извлечения пути, где будут сохраняться данные кеша. Значение может быть `null`, если путь не был задан. @version 170.2.10 @see CacheControl::getPath() Для получения текущего пути. @see CacheControl::setPath() Для задания пути. / private static ?string $path = null; / Инициализирует систему, устанавливая путь для кэша. Функция получает конфигурацию с помощью DataManager::getConfig(), определяет путь для хранения кэша (приоритет отдается переданному аргументу `$path`, затем значению из конфигурации, в последнюю очередь используется стандартный путь), нормализует его и устанавливает через self::setPath(). @see DataManager::normalizePath() для нормализации пути. @see DataManager::getConfig() для получения конфигурации. @see self::setPath() для установки пути. @param string|null $path Путь к кэшу. Может быть передан явно. Если не указан, используется путь из конфигурации или стандартный (`/engine/inc/maharder/_cache`). @return void @throws JsonException Если данные конфигурации, получаемые из JSON, не могут быть прочитаны или обработаны. / public static function init(string $path = null): void { // Получаем конфигурацию для 'maharder' $config = DataManager::getConfig('maharder'); // Определяем путь с приоритетом переданного значения, значения из конфигурации, либо стандартного значения $cachePath = $path ??= $config['cache_path'] ?? '/engine/inc/maharder/_cache'; // Нормализуем и устанавливаем путь self::setPath(DataManager::normalizePath(ROOT_DIR . $cachePath)); } / Устанавливает значение переменной пути. Метод задаёт значение для статической переменной `$path`, которая может быть использована для хранения пути. @param string $path Путь, который необходимо установить. @see self::$path Хранит значение пути. / public static function setPath(string $path): void { self::$path = $path; } / Возвращает текущий путь, если он установлен. @return string|null Возвращает путь как строку, либо null, если путь не установлен. @see self:$path Глобальная статическая переменная для хранения пути.

## Функция: `CacheControl`

**Описание:**  
Абстрактный класс для реализации управления кэшированием.
Определяет контракт для классов, управляющих различными аспектами кэш-контроля,
такими как загрузка конфигурации, миграция или работа с файлами конфигурации.
Может быть дополнен реализацией в наследниках для поддержки специфичных стратегий кэширования.

**Теги:**
## Функция: `init`

**Описание:**  
Определяет путь до кеша.
Используется для хранения или извлечения пути, где будут сохраняться
данные кеша. Значение может быть `null`, если путь не был задан.

**Теги:**
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
## Функция: `setPath`

**Описание:**  
Устанавливает значение переменной пути.
Метод задаёт значение для статической переменной `\$path`,
которая может быть использована для хранения пути.

**Теги:**
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
## Функция: `getPath`

**Описание:**  
Возвращает текущий путь, если он установлен.

**Теги:**
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
## Функция: `setCache`

**Описание:**  
Сохраняет данные в кэше путем создания файла с содержимым в JSON-формате.
Функция выполняет следующие действия:
- Преобразует имя и тип кэша в транслитерацию для формирования имени файла и пути директории.
- Проверяет и создает директорию, если она отсутствует.
- Сериализует переданные данные в JSON и записывает их в файл.
- Логирует возможные ошибки сериализации и записи данных.

**Теги:**
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
## Функция: `getCache`

**Описание:**  
Получает данные из кеша, преобразуя имена и типы в транслит и извлекая содержимое файла с последующим
декодированием данных из JSON.
Инициализирует путь к кешу, если он не был установлен ранее.
Данные извлекаются из файла с учетом типа и имени, которые преобразуются в транслит.
Если файл отсутствует или недоступен, функция возвращает `false`.
Если данные присутствуют, они декодируются из формата JSON и в случае ошибки выбрасывается исключение
`JsonException`.

**Теги:**
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
## Функция: `clearCache`

**Описание:**  
Очищает кеш для указанного типа или списка типов.
Работает по следующему алгоритму:
- Если передан строковый тип и значение `'all'`, очищается вся директория кеша.
- Если передан массив типов, очистка выполняется рекурсивно для каждого типа.
- В случае конкретного типа, очищается соответствующий подкаталог.

**Теги:**
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
- `@throws JsonException Исключение может быть выброшено, если возникают ошибки при работе с JSON-библиотекой
(например, при вызовах методов, зависящих от внутренних реализаций).`
