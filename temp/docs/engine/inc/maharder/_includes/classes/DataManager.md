# DataManager

## Функция: `connect`

**Описание:**  
Статическое свойство для хранения экземпляра базы данных.

**Теги:**
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
## Функция: `getDb`

**Описание:**  
Возвращает объект подключения к базе данных.
Если подключение еще не было установлено, метод инициирует его вызовом метода connect().

**Теги:**
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
## Функция: `setDb`

**Описание:**  
Устанавливает экземпляр базы данных.
Метод задает объект базы данных, который будет использоваться в дальнейшем.

**Теги:**
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
## Функция: `abbr`

**Описание:**  
Создает аббревиатуру из переданной строки, используя указанное разделение слов.
Функция извлекает первую букву каждого слова из строки, разделенной указанным
разделителем, и формирует из них аббревиатуру, преобразуя результат в верхний регистр.

**Теги:**
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
## Функция: `dirToArray`

**Описание:**  
Преобразует указанную директорию в массив, содержащий все папки и файлы из неё.
Этот метод является обёрткой для функции `dirToArray` и вызывает её с переданными
параметрами. Используется для рекурсивного получения структуры директорий и файлов
в виде массива.

**Теги:**
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
## Функция: `createDir`

**Описание:**  
Создаёт папку(и) по указанным путям с заданными правами доступа.
Для каждого предоставленного пути создаётся директория, если она ещё не существует.
При возникновении ошибки (например, неудачного создания директории)
ошибка логируется через `LogGenerator::generate_log`.

**Теги:**
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
## Функция: `joinPaths`

**Описание:**  
Объединяет несколько путей в один.
Объединение происходит слева направо. Пустые значения игнорируются.
Возвращаемый путь нормализуется (лишние символы удаляются, контролируется корректность пути).

**Теги:**
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
## Функция: `deleteDir`

**Описание:**  
Полностью удаляет директорию и все её содержимое, включая файлы и вложенные директории.
Эта функция рекурсивно обходит заданный путь, удаляя все файлы и вложенные директории,
а затем удаляет саму директорию. Игнорирует защищённую директорию,
путь к которой жёстко прописан в коде.

**Теги:**
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
## Функция: `nameArgs`

**Описание:**  
Преобразует переданный массив в плоский массив ключ-значение, удаляя пустые значения.
Метод принимает массив (или null) и возвращает новый массив,
где все вложенные массивы разворачиваются в плоскую структуру.
Для элементов с числовыми ключами их значения назначаются в виде ключей и значений одновременно.
Пустые строки или `null` удаляются из итогового массива.

**Теги:**
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
## Функция: `defType`

**Описание:**  
Приводит значение к указанному типу, если возможно, используя набор фильтров.
Функция принимает значение и тип, преобразует значение к заданному типу с использованием соответствующего
фильтра. Если преобразование невозможно, возвращается строковое представление значения.
Поддерживаемые типы:
- `double`, `float`: преобразование в число с плавающей точкой.
- `boolean`, `bool`: преобразование в булево значение.
- `integer`, `int`, `tinyint`: преобразование в целое число.
- `string`: фильтрация как строка.
Если указанный тип отсутствует в карте типов, функция возвращает строковое представление значения.

**Теги:**
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
## Функция: `getComparer`

**Описание:**  
Формирует строку, представляющую оператор сравнения и значение, основанную на переданном значении.
Эта функция анализирует начальный символ переданного значения, чтобы определить оператор сравнения
(например, '=', '<', '>', 'LIKE', '<>', '<=', '>='). Если переданный оператор — '%', то значение
оборачивается в проценты для использования в операциях LIKE. Если значение начинается с других
специальных символов, оно интерпретируется и оператор определяется автоматически.
При необходимости значение преобразуется в указанный тип.

**Теги:**
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
## Функция: `getConfig`

**Описание:**  
Получает конфигурацию на основе указанного кода имени и пути к файлу JSON.
Метод сначала пытается загрузить конфигурацию из указанного или стандартного пути.
Если файл не найден, он проверяет, указано ли устаревшее имя конфигурации
для выполнения миграции данных. Если миграция невозможна, возвращается пустой массив.

**Теги:**
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
## Функция: `loadJsonConfig`

**Описание:**  
Загружает JSON-конфигурацию из указанного файла и возвращает её в виде массива.
Функция читает содержимое файла, парсит его как JSON и возвращает массив данных.
Если элементы данных не являются массивами, они проходят фильтрацию с использованием
`FILTER_SANITIZE_FULL_SPECIAL_CHARS`.

**Теги:**
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
## Функция: `migrateOldConfig`

**Описание:**  
Мигрирует старый файл конфигурации в новый JSON-формат.
Функция проверяет наличие старого конфигурационного файла, преобразует его
содержимое в новый формат, сохраняет в указанной директории в формате JSON и
удаляет старый файл. Если файл отсутствует или содержит некорректный формат данных,
выполняются соответствующие обработки ошибок и возвращается пустой массив.

**Теги:**
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
## Функция: `normalizePath`

**Описание:**  
Нормализует путь, очищая его от лишних управляющих символов, точек и других нежелательных элементов.
Эта функция:
- Удаляет управляющие символы и преобразует все обратные слэши (`\`) в прямые (`/`).
- Убирает текущую (`.`) и родительскую (`..`) директории из пути.
- Удаляет корневой каталог (ROOT_DIR), если путь начинается с него.
- Гарантирует, что путь на Linux начинается с символа `/`.

**Теги:**
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
## Функция: `getPrefix`

**Описание:**  
Возвращает префикс, заданный в системе.

**Теги:**
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
## Функция: `getUserPrefix`

**Описание:**  
Получает префикс пользователя.
Данный метод возвращает значение константы `USERPREFIX`.

**Теги:**
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
## Функция: `toTranslit`

**Описание:**  
Конвертирует строку в транслитерацию, форматирует её и удаляет нежелательные символы.
Эта функция выполняет трансформацию текста с учетом заданного функционала:
- Преобразует строку в транслит с использованием Transliterator или функции `totranslit()`,
если Transliterator недоступен.
- Удаляет все символы, кроме букв, цифр и пробелов.
- Заменяет пробелы на символы подчеркивания.
- Приводит строку к нижнему регистру.
Функция упрощает создание URL-совместимых или SEO-оптимизированных строк из произвольных
текстовых данных.

**Теги:**
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
## Функция: `sanitizeArrayInput`

**Описание:**  
Очищает входные данные, массивы или значения, используя заданные флаги для фильтрации.
Если входные данные являются массивом, рекурсивно применяется функция очистки ко всем элементам массива.
Если входные данные - одно значение, применяется очистка непосредственно к нему.

**Теги:**
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
## Функция: `sanitizeInput`

**Описание:**  
Обрабатывает и фильтрует входящее значение на основе заданных флагов.
Эта функция принимает значение и массив флагов фильтрации, которые применяются
к значению последовательно, используя функцию `filter_var`.

**Теги:**
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
## Функция: `createLockFile`

**Теги:**
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
## Функция: `normalizeUrl`

**Описание:**  
Нормализует указанный URL, добавляя дополнительные параметры запроса при необходимости.
Если URL содержит схему или начинается с двойного слэша, возвращается исходный URL без изменений.
Если URL не содержит схему, добавляется базовый URL, который формируется на основе конфигурации `\$config`.
Если путь в URL является относительным, он также дополняется базовым URL.

**Теги:**
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
- str_starts_with() Используется для проверки, начинается ли строка с заданного префикса.
