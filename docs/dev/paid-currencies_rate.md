# Цены по курсу валют

**Ссылка на разработку**: [<i class="fa-thin fa-paperclip"></i> Перейти к разработке](https://devcraft.club/shop/cena-po-kursu-valjut.4/)

**Версия модификации**: <i class="fa-duotone fa-code-branch"></i> 3.1.1

## **Установка**

- Для установки достаточно закинуть в корень сайта все файлы и загрузить файл с настройками (**kurscbr.xml**) в админпанеле через менеджер плагинов.
- Для версий DLE ниже |- Создайте доп. поле с типом списка со следующими значениями:

```
AED|AED - Дирхам Арабских Эмиратов
ALL|ALL - Лек
AMD|AMD - Драма
ANG|ANG - Нидерландский Антильский Гульден
AOA|AOA - Кванза
ARS|ARS - Аргентинское Песо
AUD|AUD - Австралийский Доллар
AZN|AZN - Азербайджанский Манат
BBD|BBD - Барбадосский Доллар
BDT|BDT - Така
BGN|BGN - Болгарский Лев
BHD|BHD - Бахрейнский Динар
BRL|BRL - Бразильский Реал
BSD|BSD - Багамский Доллар
BWP|BWP - Ботсваны Пула
BYN|BYN - Белорусский Рубль
CAD|CAD - Канадский Доллар
CHF|CHF - Швейцарский Франк
CLP|CLP - Чилийское Песо
CNY|CNY - Китайский Юань
COP|COP - Колумбийское Песо
CZK|CZK - Чешская Крона
DKK|DKK - Датская Крона
DOP|DOP - Доминиканское Песо
EGP|EGP - Египетский Фунт
ETB|ETB - Эфиопский Быр
EUR|EUR - Евро
FJD|FJD - Фиджийский Доллар
GBP|GBP - Британский Фунт
GEL|GEL - Грузинский Лари
GHS|GHS - Ганский Седи
GTQ|GTQ - Гватемальский Кетсаль
HKD|HKD - Гонконгский Доллар
HNL|HNL - Гондурасская Лемпира
HRK|HRK - Хорватская Куна
HUF|HUF - Венгерский Форинт
IDR|IDR - Индонезийская Рупия
ILS|ILS - Новый Израильский Шекель
INR|INR - Индийская Рупия
IQD|IQD - Иракский Динар
IRR|IRR - Иранский Риал
ISK|ISK - Исландская Крона
JMD|JMD - Ямайский Доллар
JOD|JOD - Иорданский Динар
JPY|JPY - Японская Иена
KES|KES - Кенийский Шиллинг
KHR|KHR - Камбоджийский Риель
KRW|KRW - Южнокорейская Вона
KWD|KWD - Кувейтский Динар
KZT|KZT - Казахстанский Тенге
LAK|LAK - Лаосский Кип
LBP|LBP - Ливанский Фунт
LKR|LKR - Шри-Ланкийская Рупия
MAD|MAD - Марокканский Дирхам
MDL|MDL - Молдавский Лей
MKD|MKD - Денар Республики Македония
MMK|MMK - Мьянманский Чат
MUR|MUR - Маврикийская Рупия
MXN|MXN - Мексиканское Песо
MYR|MYR - Малайзийский Ринггит
NAD|NAD - Доллар Намибии
NGN|NGN - Найра
NOK|NOK - Норвежская Крона
NZD|NZD - Новозеландский Доллар
OMR|OMR - Оманский Риал
PAB|PAB - Бальбоа
PEN|PEN - Перуанский Соль
PGK|PGK - Папуа-Новой Гвинеи Кина
PHP|PHP - Филиппинское Песо
PKR|PKR - Пакистанская Рупия
PLN|PLN - Злотый
PYG|PYG - Парагвайский Гуарани
QAR|QAR - Катарский Риал
RON|RON - Румынский Лей
RSD|RSD - Сербский Динар
RUB|RUB - Рубль
SAR|SAR - Саудовский Риял
SCR|SCR - Сейшельская Рупия
SEK|SEK - Шведская Крона
SGD|SGD - Сингапурский Доллар
THB|THB - Бат
TJS|TJS - Таджикских Сомони
TND|TND - Тунисский Динар
TRY|TRY - Турецкая Лира
TTD|TTD - Тринидад И Тобаго Доллар
TWD|TWD - Новый Тайваньский Доллар
TZS|TZS - Танзанийский Шиллинг
UAH|UAH - Украинская Гривна
USD|USD - Доллар
UYU|UYU - Уругвайское Песо
UZS|UZS - Узбекский Сом
VEF|VEF - Боливар
VND|VND - Донг
XAF|XAF - Франк Кфа Beac
XCD|XCD - Восточно-Карибский Доллар
XOF|XOF - Западно-Африканский Франк Кфа Фран
XPF|XPF - Франк Кфп
ZAR|ZAR - Южноафриканский Рэнд
ZMW|ZMW - Замбийская Квача
```

- Регистрируемся на сайте сервиса: [exchangerate-api](https://www.exchangerate-api.com/)
- Настраиваем всё в админпанеле
- Удаляем **install.php** с корня сайта


## **Теги и использование**

### main.tpl
Для подключения **на главной** (main.tpl) достаточно этой строчки:

```HTML
{include file="engine/modules/kurscbr.php?mod=site&from=XXX"}
```

Вместо **ХХХ** впишите свою валюту. От этой валюты будет идти расчёт. Все доступные валюты можно узнать ниже. В шаблоне можно указывать след. теги:

|Тег| Описание                                               |
|---|--------------------------------------------------------|
|**{cur_XXX}**| выводит курс по соотношению изначальной валюты         |
|**{cur_id_XXX}**| выводит идентификатор валюты в виде **USD, EUR, RUB**  |


### full.tpl
Для шаблона **в полной новости** (full.tpl) доступны следующие теги:

|Тег| Описание                                                                                                                                 |
|---|------------------------------------------------------------------------------------------------------------------------------------------|
|**{cur_XXX}**| выводит окончательную цену по курсу                                                                                                      |
|**{cur_id_XXX}**| выводит идентификатор валюты в виде **USD, EUR, RUB** или название валюты в виде **Доллар, Рубль, Евро**. Смотря как вы настроили у себя |
|**{curs_XXX}**| выводит курс к изначальной валюте.                                                                                                       |
|**{price_ori}**| выводит исходную цену                                                                                                                    |
|**{valuta_ori}**| выводит исходную валюту                                                                                                                  |


### fullstory.tpl
Чтобы подключить модуль в шаблоне с полной новостью (fullstory.tpl) добавляем строчку:

```HTML
{include file="engine/modules/kurscbr.php?news_id={news-id}&save=CUR:field"}
```


- Параметр **news_id** **обязателен** к использованию. Он указывает ID новости.
- Параметр **save** указывается тогда, когда нужно сохранить отформатирование значение в определённое поле. К примеру: основная цена в евро, то в этом поле будет сохранена отконвертированная сумма. 
- Вместо **CUR**указываем нужную **валюту**
- вместо **field** - **доп. поле**. Эти значения разделяются двоеточием (**:**). Если надо сохранить в несколько полей, то используйте **запятую** в качестве разделителя.

```HTML
{include file="engine/modules/kurscbr.php?news_id={news-id}&save=EUR:eur_price,USD:usd:price"}
```

## Доступные к использованию валюты

**На данный момент API поддерживает эти валюты:**

|Идентификатор|Описание|
|-------------|--------|
|AED|Дирхам Арабских Эмиратов|
|ALL|Лек|
|AMD|Драма|
|ANG|Нидерландский Антильский Гульден|
|AOA|Кванза|
|ARS|Аргентинское Песо|
|AUD|Австралийский Доллар|
|AZN|Азербайджанский Манат|
|BBD|Барбадосский Доллар|
|BGN|Болгарский Лев|
|BHD|Бахрейнский Динар|
|BRL|Бразильский Реал|
|BSD|Багамский Доллар|
|BWP|Ботсваны Пула|
|BYN|Белорусский Рубль|
|CAD|Канадский Доллар|
|CHF|Швейцарский Франк|
|CLP|Чилийское Песо|
|CNY|Китайский Юань|
|COP|Колумбийское Песо|
|CZK|Чешская Крона|
|DKK|Датская Крона|
|DOP|Доминиканское Песо|
|EGP|Египетский Фунт|
|ETB|Эфиопский Быр|
|EUR|Евро|
|FJD|Фиджийский Доллар|
|GBP|Британский Фунт|
|GEL|Грузинский Лари|
|GHS|Ганский Седи|
|GTQ|Гватемальский Кетсаль|
|HKD|Гонконгский Доллар|
|HNL|Гондурасская Лемпира|
|HRK|Хорватская Куна|
|HUF|Венгерский Форинт|
|IDR|Индонезийская Рупия|
|ILS|Новый Израильский Шекель|
|INR|Индийская Рупия|
|IQD|Иракский Динар|
|IRR|Иранский Риал|
|ISK|Исландская Крона|
|JMD|Ямайский Доллар|
|JOD|Иорданский Динар|
|JPY|Японская Иена|
|KES|Кенийский Шиллинг|
|KHR|Камбоджийский Риель|
|KRW|Южнокорейская Вона|
|KWD|Кувейтский Динар|
|KZT|Казахстанский Тенге|
|LAK|Лаосский Кип|
|LBP|Ливанский Фунт|
|LKR|Шри-Ланкийская Рупия|
|MAD|Марокканский Дирхам|
|MDL|Молдавский Лей|
|MKD|Денар Республики Македония|
|MMK|Мьянманский Чат|
|MUR|Маврикийская Рупия|
|MXN|Мексиканское Песо|
|MYR|Малайзийский Ринггит|
|NAD|Доллар Намибии|
|NGN|Найра|
|NOK|Норвежская Крона|
|NZD|Новозеландский Доллар|
|OMR|Оманский Риал|
|PAB|Бальбоа|
|PEN|Перуанский Соль|
|PGK|Папуа-Новой Гвинеи Кина|
|PHP|Филиппинское Песо|
|PKR|Пакистанская Рупия|
|PLN|Злотый|
|PYG|Парагвайский Гуарани|
|QAR|Катарский Риал|
|RON|Румынский Лей|
|RSD|Сербский Динар|
|RUB|Рубль|
|SAR|Саудовский Риял|
|SCR|Сейшельская Рупия|
|SEK|Шведская Крона|
|SGD|Сингапурский Доллар|
|THB|Бат|
|TJS|Таджикских Сомони|
|TND|Тунисский Динар|
|TRY|Турецкая Лира|
|TTD|Тринидад И Тобаго Доллар|
|TWD|Новый Тайваньский Доллар|
|TZS|Танзанийский Шиллинг|
|UAH|Украинская Гривна|
|USD|Доллар|
|UYU|Уругвайское Песо|
|UZS|Узбекский Сом|
|VEF|Боливар|
|VND|Донг|
|XAF|Франк Кфа Beac|
|XCD|Восточно-Карибский Доллар|
|XOF|Западно-Африканский Франк Кфа Фран|
|XPF|Франк Кфп|
|ZAR|Южноафриканский Рэнд|
|ZMW|Замбийская Квача|

Если описание какой-либо валюты неверно - пишите