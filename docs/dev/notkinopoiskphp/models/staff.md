# Staff

–ú–æ–¥–µ–ª—å –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ —Ñ–∏–ª—å–º–∞ –∏–∑ Kinopoisk API.

## –û–ø–∏—Å–∞–Ω–∏–µ

`Staff` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—á–∞—Å—Ç–Ω–∏–∫–µ —Å—ä–µ–º–æ—á–Ω–æ–π –≥—Ä—É–ø–ø—ã —Ñ–∏–ª—å–º–∞: –∞–∫—Ç–µ—Ä–∞—Ö, —Ä–µ–∂–∏—Å—Å–µ—Ä–∞—Ö, —Å—Ü–µ–Ω–∞—Ä–∏—Å—Ç–∞—Ö, –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞—Ö –∏ –¥—Ä—É–≥–∏—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞—Ö. –°–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ –æ —Ä–æ–ª–∏, –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏–∏ —Ä–∞–±–æ—Ç—ã –≤ —Ñ–∏–ª—å–º–µ.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –•—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–µ—Ä—Å–æ–Ω–∞–ª–µ –≤ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–æ–º –≤–∏–¥–µ
- –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –∏–∑ –º–∞—Å—Å–∏–≤–∞ –¥–∞–Ω–Ω—ã—Ö API
- –£–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏
- –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–≥–æ –∏–º–µ–Ω–∏

**API Endpoint:** `/api/v1/staff`

## –°–≤–æ–π—Å—Ç–≤–∞

### –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- `$staffId` (int) - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ –≤ –ö–∏–Ω–æ–ø–æ–∏—Å–∫–µ
- `$nameRu` (string|null) - –ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- `$nameEn` (string|null) - –ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ
- `$description` (string|null) - –û–ø–∏—Å–∞–Ω–∏–µ —Ä–æ–ª–∏ –∏–ª–∏ —Ä–∞–±–æ—Ç—ã –≤ —Ñ–∏–ª—å–º–µ
- `$posterUrl` (string) - URL —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞

### –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- `$professionText` (string) - –¢–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏
- `$professionKey` (ProfessionKey) - –ö–ª—é—á –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ (ACTOR, DIRECTOR, WRITER –∏ —Ç.–¥.)

## –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

```php
public function __construct(
    public readonly int $staffId,
    public readonly ?string $nameRu,
    public readonly ?string $nameEn,
    public readonly ?string $description,
    public readonly string $posterUrl,
    public readonly string $professionText,
    public readonly ProfessionKey $professionKey,
)
```

### –ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è

```php
$staff = new Staff(
    staffId: 12345,
    nameRu: '–¢–æ–º –ö—Ä—É–∑',
    nameEn: 'Tom Cruise',
    description: '–ù–µ–æ',
    posterUrl: 'https://...',
    professionText: '–ê–∫—Ç–µ—Ä',
    professionKey: ProfessionKey::ACTOR
);
```

## –ú–µ—Ç–æ–¥—ã

### fromArray()

–°–æ–∑–¥–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ –∏–∑ –º–∞—Å—Å–∏–≤–∞ –¥–∞–Ω–Ω—ã—Ö API.

```php
public static function fromArray(array $data): self
```

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

- `$data` (array) - –ú–∞—Å—Å–∏–≤ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ –æ—Ç API

#### –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

- `self` - –ù–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –ø–µ—Ä—Å–æ–Ω–∞–ª–∞

#### –ò—Å–∫–ª—é—á–µ–Ω–∏—è

- `\InvalidArgumentException` - –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –∏–º–µ—é—Ç –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```php
$apiData = [
    'staffId' => 12345,
    'nameRu' => '–¢–æ–º –ö—Ä—É–∑',
    'nameEn' => 'Tom Cruise',
    'description' => '–ù–µ–æ',
    'posterUrl' => 'https://...',
    'professionText' => '–ê–∫—Ç–µ—Ä',
    'professionKey' => 'ACTOR'
];

$staff = Staff::fromArray($apiData);
```

### getDisplayName()

–ü–æ–ª—É—á–∞–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∞.

```php
public function getDisplayName(): string
```

#### –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

- `string` - –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: —Ä—É—Å—Å–∫–æ–µ –∏–º—è ‚Üí –∞–Ω–≥–ª–∏–π—Å–∫–æ–µ –∏–º—è ‚Üí "–ë–µ–∑ –∏–º–µ–Ω–∏")

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```php
echo $staff->getDisplayName(); // "–¢–æ–º –ö—Ä—É–∑" –∏–ª–∏ "Tom Cruise" –∏–ª–∏ "–ë–µ–∑ –∏–º–µ–Ω–∏"
```

### isActor()

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª –∞–∫—Ç–µ—Ä–æ–º.

```php
public function isActor(): bool
```

#### –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

- `bool` - `true` –µ—Å–ª–∏ —ç—Ç–æ –∞–∫—Ç–µ—Ä, `false` –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```php
if ($staff->isActor()) {
    echo "–ê–∫—Ç–µ—Ä: {$staff->description}";
}
```

### isDirector()

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª —Ä–µ–∂–∏—Å—Å–µ—Ä–æ–º.

```php
public function isDirector(): bool
```

#### –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

- `bool` - `true` –µ—Å–ª–∏ —ç—Ç–æ —Ä–µ–∂–∏—Å—Å–µ—Ä, `false` –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```php
if ($staff->isDirector()) {
    echo "–†–µ–∂–∏—Å—Å–µ—Ä";
}
```

### isWriter()

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª —Å—Ü–µ–Ω–∞—Ä–∏—Å—Ç–æ–º.

```php
public function isWriter(): bool
```

#### –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

- `bool` - `true` –µ—Å–ª–∏ —ç—Ç–æ —Å—Ü–µ–Ω–∞—Ä–∏—Å—Ç, `false` –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```php
if ($staff->isWriter()) {
    echo "–°—Ü–µ–Ω–∞—Ä–∏—Å—Ç";
}
```

### toArray()

–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –æ–±—ä–µ–∫—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ –≤ –º–∞—Å—Å–∏–≤.

```php
public function toArray(): array
```

#### –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

- `array` - –ú–∞—Å—Å–∏–≤ —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```php
$staffArray = $staff->toArray();
echo json_encode($staffArray); // JSON –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞
```

## –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```php
<?php

require_once 'vendor/autoload.php';

use NotKinopoisk\Client;
use NotKinopoisk\Models\Staff;
use NotKinopoisk\Enums\ProfessionKey;

// –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
$client = new Client('your-api-key');

// –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ —Ñ–∏–ª—å–º–∞
$personService = $client->persons;
$staff = $personService->getFilmStaff(301); // –ú–∞—Ç—Ä–∏—Ü–∞

echo "=== –ü–µ—Ä—Å–æ–Ω–∞–ª —Ñ–∏–ª—å–º–∞ '–ú–∞—Ç—Ä–∏—Ü–∞' ===\n";

// –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º
$actors = [];
$directors = [];
$writers = [];
$others = [];

foreach ($staff as $member) {
    if ($member->isActor()) {
        $actors[] = $member;
    } elseif ($member->isDirector()) {
        $directors[] = $member;
    } elseif ($member->isWriter()) {
        $writers[] = $member;
    } else {
        $others[] = $member;
    }
}

// –í—ã–≤–æ–¥ –∞–∫—Ç–µ—Ä–æ–≤
if (!empty($actors)) {
    echo "\nüé≠ –ê–∫—Ç–µ—Ä—ã:\n";
    foreach ($actors as $actor) {
        echo "- {$actor->getDisplayName()}";
        if ($actor->description) {
            echo " ({$actor->description})";
        }
        echo "\n";
    }
}

// –í—ã–≤–æ–¥ —Ä–µ–∂–∏—Å—Å–µ—Ä–æ–≤
if (!empty($directors)) {
    echo "\nüé¨ –†–µ–∂–∏—Å—Å–µ—Ä—ã:\n";
    foreach ($directors as $director) {
        echo "- {$director->getDisplayName()}\n";
    }
}

// –í—ã–≤–æ–¥ —Å—Ü–µ–Ω–∞—Ä–∏—Å—Ç–æ–≤
if (!empty($writers)) {
    echo "\n‚úçÔ∏è –°—Ü–µ–Ω–∞—Ä–∏—Å—Ç—ã:\n";
    foreach ($writers as $writer) {
        echo "- {$writer->getDisplayName()}\n";
    }
}

// –í—ã–≤–æ–¥ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
if (!empty($others)) {
    echo "\nüîß –û—Å—Ç–∞–ª—å–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏:\n";
    foreach ($others as $other) {
        echo "- {$other->getDisplayName()} ({$other->professionText})\n";
    }
}
```

## –†–∞–±–æ—Ç–∞ —Å –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º

```php
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ –ø–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏
function getStaffByProfession(array $staff, ProfessionKey $professionKey): array {
    return array_filter($staff, function($member) use ($professionKey) {
        return $member->professionKey === $professionKey;
    });
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ –ø–æ –∏–º–µ–Ω–∏
function findStaffByName(array $staff, string $name): ?Staff {
    $name = strtolower($name);

    foreach ($staff as $member) {
        if (strpos(strtolower($member->getDisplayName()), $name) !== false) {
            return $member;
        }
    }

    return null;
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
$staff = $personService->getFilmStaff(301);

// –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∞–∫—Ç–µ—Ä–æ–≤
$actors = getStaffByProfession($staff, ProfessionKey::ACTOR);
echo "–ê–∫—Ç–µ—Ä–æ–≤ –≤ —Ñ–∏–ª—å–º–µ: " . count($actors) . "\n";

// –ü–æ–∏—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∞–∫—Ç–µ—Ä–∞
$neo = findStaffByName($staff, '–ö–∏–∞–Ω—É');
if ($neo) {
    echo "–ù–∞–π–¥–µ–Ω –∞–∫—Ç–µ—Ä: {$neo->getDisplayName()} - {$neo->description}\n";
}
```

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞

```php
function getStaffStatistics(array $staff): array {
    $stats = [];

    foreach ($staff as $member) {
        $profession = $member->professionText;
        if (!isset($stats[$profession])) {
            $stats[$profession] = 0;
        }
        $stats[$profession]++;
    }

    return $stats;
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
$staff = $personService->getFilmStaff(301);
$stats = getStaffStatistics($staff);

echo "=== –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ ===\n";
foreach ($stats as $profession => $count) {
    echo "{$profession}: {$count} —á–µ–ª–æ–≤–µ–∫\n";
}
```

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã

- [`Person`](./person.md) - –ú–æ–¥–µ–ª—å –ø–µ—Ä—Å–æ–Ω—ã
- [`ProfessionKey`](../enums/profession-key.md) - –ö–ª—é—á–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–π
- [`PersonService`](../services/person-service.md) - –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–µ—Ä—Å–æ–Ω–∞–º–∏
- [`MovieStaffResponse`](../responses/movie-staff-response.md) - –û—Ç–≤–µ—Ç —Å –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º —Ñ–∏–ª—å–º–∞
