# AssetsChecker

Вспомогательный класс для проверки вспомогательных файлов на локальном сервере и сверяет их с удалённым. При различии данных будет предложено обновление

## Метод подключения

```php
include_once DLEPlugins::Check(ENGINE_DIR . '/inc/maharder/_includes/trait/AssetsChecker.php');
```

## Свойства

### assets_arr

Массив со всеми данными для обновления стилей и скриптов

```php
private array $assets_arr
```

### assets_dir

Путь до всех вспомогательных файлов

```php
private string $assets_dir = ENGINE_DIR . '/inc/maharder/admin/assets'
```

### asset_file

Файл с информацией и хешами вспомогательных файлов

```php
private string $asset_file = ENGINE_DIR . '/inc/maharder/_includes/assets.json'
```

## Методы

### parseAssets

Инициализатор для парсинга вспомогательных файлов
<br>Если файла с хешами не существует, то начнёт проверять все файлы
<br>Если файл существует, то только при принудительной проверке будет перепроверять данные

```php
public function parseAssets(bool $parse = false): void
```

**Параметры:**


| Параметр | Тип   | Описание                                                                                                |
| ------------------ | ---------- | ----------------------------------------------------------------------------------------------------------------- |
| `$parse`         | **bool** | Задействовать принудительный парсинг, по умолчанию: нет (false) |

### checkAssets

Проверяет целостность файлов на сайте и на сервере разработчика
<br>Если существуют разницы в хеш суммах, о них сообщит в массиве информации

```php
public function checkAssets($rewrite = false): array
```

**Параметры:**


| Параметр | Тип   | Описание                                                                                                                   |
| ------------------ | ---------- | ------------------------------------------------------------------------------------------------------------------------------------ |
| `$rewrite`       | **bool** | Задействовать принудительную перезапись данных, по умолчанию: нет (false) |

### parse_assets

Парсер не хватающих и обновляемых данных

```php
private function parse_assets(): void
```

### save_asset

Сохраняет полученный файл на сервер сайта и возвращает данные о файле, либо отрицательное значение (false)

```php
public function save_asset(array $data, string $file): array|bool
```

**Параметры:**


| Параметр | Тип     | Описание                        |
| ------------------ | ------------ | ----------------------------------------- |
| `$data`          | **array**  | Массив данных о файле |
| `$file`          | **string** | Путь файла                     |

### prepare_assets

Подготавливает информацию о файле на локальном сервере и сохраняет в массиве с данными

```php
private function prepare_assets(array $arr, string $dir = __DIR__): void
```

**Параметры:**


| Параметр | Тип     | Описание                                                                                    |
| ------------------ | ------------ | ----------------------------------------------------------------------------------------------------- |
| `$arr`           | **array**  | Массив с файлами                                                                      |
| `$dir`           | **string** | Исходная папка для поиска, по умолчанию: текущая папка |
